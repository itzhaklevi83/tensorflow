"""
create a proxy 
create the necessary files
test the proxy
create interface for control the proxy
"""

from selenium import webdriver
import time
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.webdriver.common.keys import Keys
import os
from selenium.webdriver.common.action_chains import ActionChains
import requests


# create the proxy
proxy = webdriver.Proxy()
proxy.proxy_type = ProxyType.MANUAL
proxy.http_proxy = 'localhost:8080'
# proxy.socks_proxy = 'localhost:8080'
proxy.add_to_capabilities(webdriver.DesiredCapabilities.CHROME)

# create a new Chrome session
driver = webdriver.Chrome(desired_capabilities=DesiredCapabilities.CHROME, proxy=proxy)
driver.implicitly_wait(30)
driver.maximize_window()

# navigate to the application home page
driver.get('http://www.google.com')

# get the search textbox
search_field = driver.find_element_by_name('q')

# enter search keyword and submit
search_field.send_keys('Selenium WebDriver Interview questions')
search_field.submit()

# get the list of elements which are displayed after the search
# currently on result page using find_elements_by_class_name method
lists = driver.find_elements_by_class_name('r')

# get the number of elements found
print('Found ' + str(len(lists)) + ' searches:')

# iterate through each element and print the text that is
# name of the search

i = 0
for listitem in lists:
    print(listitem.get_attribute('innerHTML'))
    i = i + 1
    if i > 10:
        break

# close the browser window
driver.quit()
